Отлично! Раз фазы 0 и 1 успешно завершены, у нас есть прочный фундамент: рабочее Electron-приложение с React+TS+Vite, настроенным IPC и бэкенд-сервисами (обертками) для yt-dlp, ffmpeg и OpenAI API.

Теперь переходим к **Фазе 2: Базовый Пользовательский Интерфейс (Frontend Basic UI)**.

**Цель:** Создать основные элементы пользовательского интерфейса (UI) в React-приложении (renderer process), которые позволят пользователю вводить данные (URL видео, язык), настраивать базовые параметры (API ключ) и инициировать процесс обработки видео через IPC, вызывая подготовленные в Фазе 1 бэкенд-сервисы. На этом этапе основное внимание уделяется *вводу данных* и *запуску* процесса, а не детальному отображению прогресса (это будет в Фазе 4).

**Фокус на Best Practices (Январь 2025):**
*   **Компонентный подход:** Разработка переиспользуемых UI-компонентов.
*   **Управление состоянием:** Использование встроенных хуков React (`useState`, `useContext` при необходимости) для управления состоянием UI.
*   **Типизация:** Строгая типизация пропсов компонентов и состояния.
*   **UI-библиотека:** Активное использование компонентов Ant Design v5 для консистентного вида и функциональности.
*   **Взаимодействие с бэкендом:** Использование строго типизированного API `window.electronAPI`, созданного в Фазе 0.

---

**Шаг 2.1: Создание Компонента Ввода URL и Выбора Языка**

*   **Задача:** Разработать основной компонент формы, где пользователь сможет ввести URL видео, выбрать папку для загрузки видео и выбрать язык оригинального видео (если не определили автоматически на эатпе скачивания) и целевой язык перевода.
*   **Действия:**
    1.  Создать новый компонент `src/renderer/components/InputForm.tsx`.
    2.  Использовать `useState` для хранения введенного URL, download folder и выбранных языков.
    3.  Использовать компоненты Ant Design:
        *   `Input` (с префиксом иконки ссылки) для ввода URL.
        *   `Select` для выбора целевого языка. Опции для `Select` можно пока захардкодить в `src/shared/constants.ts` (например, `[{ value: 'en', label: 'English' }, { value: 'es', label: 'Spanish' }, ...]`). Позже можно будет подгружать динамически.
        *   `Form` и `Form.Item` для структуры и валидации (хотя бы базовой - поле URL не пустое).
    4.  Передавать введенные данные "наверх" (например, в родительский компонент `App.tsx` или другой управляющий компонент) через колбэки (`onChange` пропсы).
    5.  Интегрировать этот компонент в основную область контента приложения (`App.tsx` или в `Layout` из Фазы 0).
*   **Инструменты:** React (`useState`), Ant Design (`Form`, `Input`, `Select`), TypeScript.
*   **Результат:** Пользовательский интерфейс для ввода основной информации: URL видео и целевого языка.

---

**Шаг 2.2: Создание Компонента Настроек (API Ключ OpenAI)**

*   **Задача:** Разработать интерфейс для ввода и сохранения API ключа OpenAI, используя `electron-store` через IPC.
*   **Действия:**
    1.  Создать новый компонент `src/renderer/components/SettingsModal.tsx`.
    2.  Использовать `useState` для управления видимостью модального окна и значением поля ввода API ключа.
    3.  Использовать Ant Design `Modal` для отображения настроек во всплывающем окне.
    4.  Внутри модального окна использовать `Input.Password` для безопасного ввода API ключа.
    5.  При открытии модального окна: вызвать `window.electronAPI.getSetting('openaiApiKey')` (этот метод и канал IPC нужно будет добавить по аналогии с `getAppVersion` из Фазы 0, используя `settingsManager` из шага 0.6) для загрузки текущего сохраненного ключа.
    6.  При сохранении: вызвать `window.electronAPI.setSetting('openaiApiKey', newApiKey)` (также новый метод IPC) для сохранения ключа.
    7.  Добавить кнопку (например, иконку шестеренки `SettingOutlined` из `@ant-design/icons` в хедере или сайдбаре) для открытия модального окна настроек.
*   **Инструменты:** React (`useState`, `useEffect`), Ant Design (`Modal`, `Input.Password`, `Button`, `Form`), Electron IPC (`window.electronAPI`).
*   **Результат:** Пользователь может ввести и сохранить свой API ключ OpenAI, который будет использоваться бэкенд-сервисом `openAiClient`.

---

**Шаг 2.3: Добавление Кнопки "Начать Обработку" и Вызов IPC**

*   **Задача:** Добавить кнопку, которая инициирует процесс обработки, собирая данные из формы и вызывая соответствующий метод IPC в main процессе.
*   **Действия:**
    1.  В родительском компоненте (например, `App.tsx` или где находится `InputForm`), добавить кнопку Ant Design `Button` с текстом "Обработать видео" (или аналогичным). Сделать ее неактивной (`disabled`), если URL не введе и папка для загрузки не выбрана.
    2.  Создать обработчик `onClick` для этой кнопки.
    3.  В обработчике:
        *   Получить текущие значения URL и целевого языка из состояния (поднятого из `InputForm`).
        *   Вызвать *новый* метод IPC, например, `window.electronAPI.startProcessing({ url: videoUrl, targetLanguage: langCode })`.
        *   Определить соответствующий канал `Channels.START_PROCESSING` в `src/shared/ipc-types.ts`.
        *   В `src/main/index.ts` добавить обработчик `ipcMain.handle(Channels.START_PROCESSING, async (event, args) => { ... })`.
        *   **Важно:** На данном этапе этот обработчик в `main` процессе *не будет* выполнять всю цепочку. Он может:
            *   Залогировать полученные аргументы (`url`, `targetLanguage`).
            *   Вызвать *первый* шаг, например, `ytDlpService.getVideoInfo(args.url)` или `ytDlpService.downloadMedia(...)`.
            *   Вернуть немедленный ответ на рендерер (например, `{ success: true, message: 'Processing started...' }`) или бросить ошибку, если входные данные некорректны.
*   **Инструменты:** React (`useState`), Ant Design (`Button`), Electron IPC.
*   **Результат:** Пользователь может инициировать процесс обработки видео, передав URL и язык в бэкенд через IPC. Бэкенд получает запрос и может начать выполнение первого шага.

---

**Шаг 2.4: Базовое Отображение Статуса**

*   **Задача:** Предоставить пользователю минимальную обратную связь о том, что процесс запущен или произошла ошибка при запуске.
*   **Действия:**
    1.  В компоненте, где находится кнопка "Начать обработку", добавить `useState` для отслеживания состояния обработки (например, `isProcessing: boolean`) и для хранения простого сообщения о статусе (`statusMessage: string`).
    2.  В обработчике кнопки "Начать обработку":
        *   Перед вызовом IPC установить `setIsProcessing(true)` и `setStatusMessage('Начинаем обработку...')`.
        *   После получения ответа от IPC:
            *   Если успешно: `setStatusMessage('Обработка начата...')` (оставить `isProcessing` в `true`, т.к. сам процесс долгий).
            *   Если ошибка при *запуске* (не в процессе самой обработки): `setIsProcessing(false)`, `setStatusMessage(errorMessageFromIpc)`.
    3.  Использовать Ant Design компоненты для отображения статуса:
        *   `Spin` (компонент спиннера/загрузки) можно показывать, когда `isProcessing === true`. Его можно обернуть вокруг формы ввода или разместить рядом с кнопкой.
        *   `Alert` или `Typography.Text` для отображения `statusMessage`. Можно показывать сообщение об успехе или ошибке запуска.
*   **Инструменты:** React (`useState`), Ant Design (`Spin`, `Alert`, `Typography`).
*   **Результат:** Пользователь видит индикатор загрузки и простое текстовое сообщение, когда процесс инициирован или если произошла ошибка при его запуске. Это базовая обратная связь, детальный прогресс будет в Фазе 4.

---

**Шаг 2.5: Структурирование UI и Компонентов**

*   **Задача:** Организовать созданные UI компоненты в логическую структуру, используя основной макет приложения.
*   **Действия:**
    1.  Пересмотреть `App.tsx` и компонент `Layout`, созданный в Фазе 0.
    2.  Разместить `InputForm` в основной области контента.
    3.  Разместить кнопку/иконку настроек в подходящем месте (хедер, сайдбар).
    4.  Разместить область отображения статуса (`Spin`, `Alert`) рядом с формой или кнопкой.
    5.  Использовать компоненты Ant Design для верстки и отступов (`Layout`, `Content`, `Header`, `Sider`, `Space`, `Card`, `Divider`) для создания чистого и организованного интерфейса.
    6.  Убедиться, что передача пропсов и состояния между компонентами организована логично (поднятие состояния или использование `Context` API, если необходимо для простых случаев вроде настроек).
*   **Инструменты:** React, Ant Design (компоненты разметки).
*   **Результат:** Базовый пользовательский интерфейс приложения собран из созданных компонентов, имеет логичную структуру и готов к взаимодействию пользователя с основными функциями.

---

**Итог Фазы 2:**
К концу этой фазы у нас будет работающий базовый UI. Пользователь сможет:
1.  Ввести URL видео.
2.  Выбрать папку для загрузки видео.
3.  Выбрать язык оригинала (если не смогли определить автоматически). 
2.  Выбрать целевой язык.
3.  Открыть настройки и ввести/сохранить API ключ OpenAI.
4.  Нажать кнопку "Обработать видео", которая передаст данные в бэкенд.
5.  Увидеть базовую индикацию того, что процесс запущен (спиннер, сообщение).

**Ограничения на данном этапе:**
*   Нет детального отображения прогресса (скачивание, транскрипция, перевод и т.д.).
*   Нет обработки ошибок, возникающих *во время* длительных процессов на бэкенде (это будет в Фазе 6).
*   Нет возможности выбрать оффлайн-модели (только переключатель, если он был добавлен).
*   Нет управления очередью задач или историей обработок.

Следующая фаза (Фаза 3) сосредоточится на соединении бэкенд-сервисов в единый конвейер обработки в main процессе.